<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>kitty</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="poster">
      <img src="fish1.png" class="fish" />
      <img src="fish2.png" class="fish" />
      <img src="fish3.png" class="fish" />
      <img src="fish4.png" class="fish" />
      <img src="fish5.png" class="fish" />
      <img src="fish6.png" class="fish" />
      <img src="fish7.png" class="fish" />
      <img src="fish8.png" class="fish" />
      <img src="fish9.png" class="fish" />

      <img src="fish1.png" class="fish" />
      <img src="fish2.png" class="fish" />
      <img src="fish3.png" class="fish" />
      <img src="fish4.png" class="fish" />
      <img src="fish5.png" class="fish" />
      <img src="fish6.png" class="fish" />
      <img src="fish7.png" class="fish" />
      <img src="fish8.png" class="fish" />
      <img src="fish9.png" class="fish" />

      <img src="fish1.png" class="fish" />
      <img src="fish2.png" class="fish" />
      <img src="fish3.png" class="fish" />
      <img src="fish4.png" class="fish" />
      <img src="fish5.png" class="fish" />
      <img src="fish6.png" class="fish" />
      <img src="fish7.png" class="fish" />
      <img src="fish8.png" class="fish" />
      <img src="fish9.png" class="fish" />

      <img src="fish1.png" class="fish" />
      <img src="fish2.png" class="fish" />
      <img src="fish3.png" class="fish" />
      <img src="fish4.png" class="fish" />
      <img src="fish5.png" class="fish" />
      <img src="fish6.png" class="fish" />
      <img src="fish7.png" class="fish" />
      <img src="fish8.png" class="fish" />
      <img src="fish9.png" class="fish" />

      <img src="fish1.png" class="fish" />
      <img src="fish2.png" class="fish" />
      <img src="fish3.png" class="fish" />
      <img src="fish4.png" class="fish" />
      <img src="fish5.png" class="fish" />
      <img src="fish6.png" class="fish" />
      <img src="fish7.png" class="fish" />
      <img src="fish8.png" class="fish" />
      <img src="fish9.png" class="fish" />

      <img src="fish1.png" class="fish" />
      <img src="fish2.png" class="fish" />
      <img src="fish3.png" class="fish" />
      <img src="fish4.png" class="fish" />
      <img src="fish5.png" class="fish" />
      <img src="fish6.png" class="fish" />
      <img src="fish7.png" class="fish" />
      <img src="fish8.png" class="fish" />
      <img src="fish9.png" class="fish" />

      <img src="kitty.png" class="kitty" />

      <img src="w1.png" class="whale" />
      <img src="w2.png" class="whale" />
      <img src="w3.png" class="whale" />
    </div>
    <img src="introduce.png" class="intro" />

    <!-- Î¨ºÍ≤∞ Ìö®Í≥º ÌïÑÌÑ∞ -->
    <svg width="0" height="0">
      <filter id="waterWave">
        <feTurbulence
          type="fractalNoise"
          baseFrequency="0.015"
          numOctaves="2"
          seed="3"
        >
          <animate
            attributeName="baseFrequency"
            dur="15s"
            values="0.015;0.02;0.015"
            repeatCount="indefinite"
          />
        </feTurbulence>
        <feDisplacementMap in="SourceGraphic" scale="25" />
      </filter>
    </svg>

    <script>
      const fishes = document.querySelectorAll(".fish");
      const kitty = document.querySelector(".kitty");
      const whales = document.querySelectorAll(".whale");

      function random(min, max) {
        return Math.random() * (max - min) + min;
      }

      // Í∞Å Í∞ùÏ≤¥ ÏÉÅÌÉú Ï†ÄÏû•Ïö©
      const sprites = [];

      // ÎßàÏö∞Ïä§ ÏúÑÏπò
      let mouseX = null;
      let mouseY = null;

      window.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      function initSprites() {
        const elements = [...fishes, ...whales];
        if (kitty) elements.push(kitty);

        elements.forEach((el) => {
          const isKitty = el.classList.contains("kitty");

          // Í∏∞Î≥∏ ÌÅ¨Í∏∞ (Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ï†Ñ ÎåÄÎπÑÏö©)
          let w = el.offsetWidth || (isKitty ? 200 : 150);
          let h = el.offsetHeight || (isKitty ? 200 : 150);

          const padding = 3;

          const maxX = window.innerWidth - w - padding;
          const maxY = window.innerHeight - h - padding;

          const x = random(padding, maxX);
          const y = random(padding, maxY);

          // ‚úÖ baseSpeedÎ°ú Ïù¥Î¶Ñ ÌÜµÏùº
          const baseSpeed = isKitty ? random(1.5, 3) : random(0.7, 2.2);
          const angle = Math.random() * Math.PI * 2;
          const vx = Math.cos(angle) * baseSpeed;
          const vy = Math.sin(angle) * baseSpeed;

          sprites.push({
            el,
            isKitty,
            x,
            y,
            w,
            h,
            vx,
            vy,
            baseSpeed, // ‚úÖ Ïó¨Í∏∞ÏÑú ÌîÑÎ°úÌçºÌã∞Î°ú Ï†ÄÏû•
          });

          el.style.visibility = "visible";
        });
      }

      function updateSprites() {
        const paddingX = 20;
        const paddingY = 0;
        
        const width = window.innerWidth;
        const height = window.innerHeight;

        sprites.forEach((s) => {
          // ÎßàÏö∞Ïä§ ÌîºÌïòÍ∏∞ Ìûò Ï°∞Ï†à
          if (mouseX !== null && mouseY !== null) {
            const centerX = s.x + s.w / 2;
            const centerY = s.y + s.h / 2;

            const dx = centerX - mouseX;
            const dy = centerY - mouseY;
            const dist = Math.hypot(dx, dy);

            const threshold = s.isKitty ? 600 : 500; // ÏòÅÌñ• Î≤îÏúÑ
            if (dist > 0 && dist < threshold) {
              const nx = dx / dist;
              const ny = dy / dist;
              const factor = (threshold - dist) / threshold; // Í∞ÄÍπåÏö∏ÏàòÎ°ù Í∞ïÌïòÍ≤å

              const avoidStrength = s.isKitty ? 4.5 : 4.0;
              s.vx += nx * avoidStrength * factor;
              s.vy += ny * avoidStrength * factor;
            }
          }

          // ÏÜçÎèÑ Ï†úÌïú
          const maxSpeed = s.isKitty ? 7.2 : 3.2;
          let speed = Math.hypot(s.vx, s.vy);
          if (speed > maxSpeed) {
            s.vx = (s.vx / speed) * maxSpeed;
            s.vy = (s.vy / speed) * maxSpeed;
          }

          // ÏúÑÏπò ÏóÖÎç∞Ïù¥Ìä∏
          s.x += s.vx;
          s.y += s.vy;

          const maxX = width - s.w - padding;
          const maxY = height - s.h - padding;

          // Î≤Ω Ï∂©Îèå Ï≤¥ÌÅ¨ (ÌÜµ! ÌïòÍ≥† ÌäïÍ∏∞Í∏∞)
          if (s.x <= padding) {
            s.x = padding;
            s.vx = Math.abs(s.vx);
          } else if (s.x >= maxX) {
            s.x = maxX;
            s.vx = -Math.abs(s.vx);
          }

          if (s.y <= padding) {
            s.y = padding;
            s.vy = Math.abs(s.vy);
          } else if (s.y >= maxY) {
            s.y = maxY;
            s.vy = -Math.abs(s.vy);
          }

          // üí° ÎßàÏö∞Ïä§ÏóêÏÑú Î©ÄÏñ¥ÏßÄÎ©¥ ÏõêÎûò baseSpeedÎ°ú ÏÑúÏÑúÌûà ÌöåÎ≥µ
          const currentSpeed = Math.hypot(s.vx, s.vy);
          const desiredSpeed = s.baseSpeed;
          const speedDiff = desiredSpeed - currentSpeed;

          if (currentSpeed > 0) {
            s.vx += (s.vx / currentSpeed) * speedDiff * 0.02;
            s.vy += (s.vy / currentSpeed) * speedDiff * 0.02;
          }

          // Î∞©Ìñ•Ïóê Îî∞Îùº Ï¢åÏö∞ Î∞òÏ†Ñ
          const goingRight = s.vx > 0;
          const flip = goingRight ? "rotateY(180deg)" : "rotateY(0deg)";
          s.el.style.transform = `translate(${s.x}px, ${s.y}px) ${flip}`;
        });

        requestAnimationFrame(updateSprites);
      }

      window.addEventListener("load", () => {
        initSprites();
        requestAnimationFrame(updateSprites);
      });

      // Ï∞Ω ÌÅ¨Í∏∞ Î≥ÄÍ≤Ω Ïãú, Îã§Ïùå ÌîÑÎ†àÏûÑÏóêÏÑú ÏûêÏó∞Ïä§ÎüΩÍ≤å ÏÉà Î≤îÏúÑÏóê ÎßûÍ≤å ÌäïÍ∏∞ÎèÑÎ°ù Ï≤òÎ¶¨
      window.addEventListener("resize", () => {
        sprites.forEach((s) => {
          const padding = 20;
          const maxX = window.innerWidth - s.w - padding;
          const maxY = window.innerHeight - s.h - padding;
          if (s.x > maxX) s.x = maxX;
          if (s.y > maxY) s.y = maxY;
        });
      });
    </script>
  </body>
</html>


